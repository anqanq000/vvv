# cmake build file for v^3
# (c) by Stefan Roettger

PROJECT(viewer)

CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

OPTION(BUILD_VIEWER_APPS "Build applications." ON)
OPTION(BUILD_VIEWER_TOOLS "Build command line tools." OFF)

INCLUDE(${CMAKE_CURRENT_SOURCE_DIR}/viewer-config.cmake)

INCLUDE_DIRECTORIES(${CMAKE_CURRENT_SOURCE_DIR})

ADD_LIBRARY(${VIEWER_NAME} ${VIEWER_SRCS} ${VIEWER_HDRS})
SET_TARGET_PROPERTIES(${VIEWER_NAME} PROPERTIES PUBLIC_HEADER "${VIEWER_HDRS}" DEBUG_POSTFIX "d")
TARGET_LINK_LIBRARIES(${VIEWER_NAME} ${VIEWER_LIBRARY})

MACRO(MAKE_VIEWER_EXECUTABLE name)
   ADD_EXECUTABLE(${name} ${name}.cpp)
   TARGET_LINK_LIBRARIES(${name}
      ${VIEWER_NAME}
      ${DCMTK_dcmdata_LIBRARY}
      ${DCMTK_dcmtls_LIBRARY}
      ${DCMTK_ofstd_LIBRARY}
      ${OPENGL_LIBRARIES}
      ${GLUT_LIBRARY}
      ${ZLIB_LIBRARY}
      )
ENDMACRO(MAKE_VIEWER_EXECUTABLE)

IF (BUILD_VIEWER_APPS)
   MAKE_VIEWER_EXECUTABLE(v3)
ENDIF (BUILD_VIEWER_APPS)

IF (BUILD_VIEWER_TOOLS)
   ADD_SUBDIRECTORY(tools)
ENDIF (BUILD_VIEWER_TOOLS)

INSTALL(
   TARGETS ${VIEWER_NAME}
   LIBRARY DESTINATION lib
   ARCHIVE DESTINATION lib
   PUBLIC_HEADER DESTINATION include/viewer
   )

IF (BUILD_VIEWER_APPS)
   INSTALL(
      TARGETS v3
      RUNTIME DESTINATION bin
      )
ENDIF (BUILD_VIEWER_APPS)
